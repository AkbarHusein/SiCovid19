<div class="container-lg">
  <section id="forum" class="mb-5">
    <div class="wrapper text-center row p-4">
      <div class="section-header col-12 mb-3">
        <p class="lead d-inline-block content-title mb-4">
          <img src="./assets/icons/messageIcon.svg" alt="" srcset="">
          <span>Forum Diskusi</span>
        </p>
        <h2 class="section-header-text">Diskusi bersama SiCovid19</h2>
      </div>
      <div class="section-content col-12">
        <div class="row justify-content-center text-center">
          <div class="vector-wrapper">
            <img src="assets/images/My-answer-cuate-1.png" alt="icon message" class="w-75">
          </div>
          <div class="text-content p-4">
            <p class=" m-auto">
              Forum diskusi adalah salah satu fitur di website siCovid19 yang dibuat guna untuk membantu masyarakat
              dalam
              hal bertukar informasi mengenai covid19 yang sedang di hadapi masyarakat Indonesia, baik dari sisi keadaan
              fisik, vaksinasi, maupun yang lain. Pada fitur ini Anda mendapat berbagai informasi dan berdiskusi
              langsung
              mengenai keadaan atau hal yang berkaitan dengan covid19.
            </p>
          </div>
        </div>
        <!-- Button trigger modal -->
        <div>
          <a class="btn btn-primary btn-mulai-diskusi rounded-pill font-weight-bold" data-bs-toggle="modal"
            href="#forumModalToggle" role="button">Mulai Diskusi</a>
        </div>
  </section>

  <div class="modal fade" id="forumModalToggle" aria-labelledby="forumModalToggleLabel" tabindex="-1" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <div class="lead d-inline-block modal-title">
            <img src="./assets/images/forum 1.svg" alt="" srcset="" width="25px" height="25px">
            <span>Forum Diskusi</span>
          </div>
          <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal" aria-label="Close">‚ùå</button>
        </div>
        <div class="modal-body">
          <div class="card bg-transparent border-secondary mb-3 rounded-4">
            <div class="card-body">
              <img src="./assets/images/72 - Edit.svg" alt="" srcset="" width="25px" height="25px">
              <button class="btn btn-without-style" data-bs-target="#forumModalToggle2" data-bs-toggle="modal">Mulai
                Diskusi</button>
            </div>
          </div>

          <% if (discussions || discussions.length != 0) { %>
          <% for( let entries = 0; entries < discussions.length; entries++ ) { %>
          <div class="card bg-transparent border-secondary w-100 mb-3 rounded-4" style="width: 18rem;">
            <div class="card-body">
              <h5 class="card-title mb-0"><%- discussions[entries]['title']; %></h5>
              <p class="small mb-1"><%- discussions[entries]['date']; %></span>
                <div class="lead d-inline-block uname-title">
                  <span class="font-weight-normal"><%- discussions[entries]['author']; %> :</span>
                </div>
              <p class="card-text mb-1"><%- discussions[entries]['content']; %></p>
              
              <ul>
              <% if (discussions[entries]['replies']) { %>
                <% for( let reply = 0; reply < discussions[entries]['replies'].length; reply++ ) { %>
                  <li>
                    <div class="lead d-inline-block uname-title">
                      <span class="font-weight-normal"><%- discussions[entries]['replies'][reply]['author'] %></span>
                    </div>
                    <p class="small m-0"><%- discussions[entries]['replies'][reply]['date'] %></h5>
                    <p class="card-text mb-1"><%- discussions[entries]['replies'][reply]['reply'] %></p>
                  </li>
                <% } %>
              <% } %>
              </ul>

              <form method="post" action="/entries/reply" class="input-group mb-3">
                <input type="text" name="id" value="<%- discussions[entries]['_id']; %>" hidden>
                <input type="text" class="form-control" placeholder="Balas" aria-label="Balas"
                  aria-describedby="button-addon" name="reply">
                <button class="btn btn-outline-danger" type="submit" id="button-addon">
                  <img src="./assets/images/conversation 1.svg" width="20px" height="20px">
                </button>
              </form>
            </div>
          </div>
          <% } %>
          <% } %>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="forumModalToggle2" aria-labelledby="forumModalToggleLabel2" data-bs-backdrop="static"
    tabindex="-1" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-dialog-centered modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <div class="lead d-inline-block modal-title">
            <span class="font-weight-bold">Buat Diskusi</span>
          </div>
        </div>
        <form method="post" action="/entries" class="modal-body">
          <div class="mb-3">
            <input type="text" class="form-control" id="forumFormControlInput1" placeholder="Topik Diskusi"
              name="title">
          </div>
          <div class="mb-3">
            <textarea class="form-control" id="forumFormControlTextarea1" rows="3" placeholder="Ceritakan disini"
              name="content"></textarea>
          </div>
          <div class="button-form text-end">
            <button class="btn btn-danger rounded-pill" data-bs-target="#forumModalToggle"
              data-bs-toggle="modal">Batal</button>
            <button type="submit" class="btn btn-danger rounded-pill" data-bs-target="#forumModalToggle"
              data-bs-toggle="modal">Kirim</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>